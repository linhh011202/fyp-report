\chapter{Introduction}
\label{chap:introduction}

\section{Background}
In the rapidly evolving landscape of speech processing technologies, the \textbf{Speech Gateway API} serves as a critical infrastructure for delivering advanced speech services to various applications. \textbf{Speech Gateway} is a backend service that provides Speech-to-Text (STT) capabilities to end users through a secured API. It acts as a \textbf{middle layer} between client applications and an underlying Speech Engine. Instead of allowing clients to call the speech engine directly, Speech Gateway centralizes authentication, access control, token issuance, and (in this project) subscription/payment management.

As the demand for these services grows, the need for a robust, centralized management system becomes paramount. Traditionally, interacting with such APIs required direct integration and manual management, which can be inefficient for end-users and administrators alike. The \textbf{Gateway Dashboard} project was initiated to bridge this gap, providing a user-friendly graphical interface that empowers users to manage their speech processing tasks while giving administrators the tools needed to oversee system operations, manage users, and monetize services effectively.

\section{Problem Statement}
Prior to this project, the Speech Gateway ecosystem faced several challenges:
\begin{enumerate}

    \item \textbf{Limited Access Control:} The existing system lacked a flexible authentication mechanism, supporting only basic credentials without modern Single Sign-On (SSO) capabilities.
    \item \textbf{Absence of Monetization Infrastructure:} There was no automated system to handle subscriptions, billing, or tiered access plans, hindering the commercial viability of the services.

\end{enumerate}

\section{Project Objectives}
The primary objective of this project is to design and implement a comprehensive \textbf{Gateway Dashboard} and enhance the backend infrastructure to support commercial-grade features. Specific objectives include:

\begin{itemize}
    \item \textbf{SSO Integration:} Implement secure Single Sign-On (Google, Apple) to streamline user authentication, reduce credential fatigue, and centralize identity management across services.
   
    \item \textbf{Payment Portal:
    }Design a subscription and payment module integrating Stripe to handle recurring billing, automated invoicing, and subscription lifecycle management.
    
    \item \textbf{Frontend Development:} Develop a web-based dashboard using Vue.js and Vuetify to provide an intuitive interface for users to access speech services and manage their data.

\end{itemize}

\section{Project Scope}
The project scope encompasses three major components: Single Sign-On (SSO) Authentication, Payment \& Subscription Management with Stripe Integration, and Frontend Dashboard Development.

\subsection{Single Sign-On (SSO) Authentication}
This component enables users to authenticate using their existing social accounts or traditional credentials.

\textbf{Key Features:}
\begin{itemize}
    \item \textbf{Google SSO:} OAuth 2.0 integration with state management.
    \item \textbf{Apple SSO:} Apple Sign In integration with token verification and privacy-preserving email relay.
    \item \textbf{JWT Token Management:} Generation and validation of access tokens (15-minute expiry) and refresh tokens with secure cookie storage (HttpOnly, Secure, SameSite).
    \item \textbf{Token Blacklisting:} Redis-based blacklist for immediate token revocation on logout or security events.
    \item \textbf{Traditional Authentication:} Email/password authentication with bcrypt hashing.
    \item \textbf{Session Security:} XSS prevention and secure token lifecycle management.
\end{itemize}

\subsection{Payment Portal with Stripe Integration}
This component handles monetization through Stripe, enabling tiered subscription plans with usage-based quotas.

\textbf{Key Features:}
\begin{itemize}
    \item \textbf{Stripe Checkout:} Hosted checkout session creation and payment processing.
    \item \textbf{Webhook Handling:} Secure webhook signature verification and idempotent event processing for payment lifecycle events.
    \item \textbf{Plan Management:} JSON-based plan configuration with versioning support and admin API.
    \item \textbf{Redis Caching:} Fast plan retrieval and Stripe price data caching with automatic cache invalidation.
    \item \textbf{Subscription Synchronization:} Real-time sync between Stripe and internal database for subscription status.
    \item \textbf{Quota Management:} Usage tracking and access control middleware enforcing plan limits.
    \item \textbf{Payment UI:} Plan comparison cards, checkout flow, and subscription management interface.
\end{itemize}

\subsection{Frontend Dashboard}
This component provides a complete Single Page Application (SPA) using Vue.js 2 and Vuetify with Material Design.

\textbf{Key Features:}
\begin{itemize}
    \item \textbf{Authentication UI:} Sign In, Sign Up pages with SSO integration and OAuth callback handling.
    \item \textbf{Protected Routing:} Vue Router with role-based navigation guards and lazy loading for performance.
    \item \textbf{State Management:} Vuex store for centralized state management (auth, user, subscription, plans).
    \item \textbf{HTTP Interceptors:} Automatic JWT token injection, token refresh logic, and retry mechanisms.
    \item \textbf{User Dashboard:} Subscription status display, usage quota tracking with progress indicators, profile management.
    \item \textbf{Admin Interface:} Plans management with JSON editor, validation, and version history.
    \item \textbf{Responsive Design:} Mobile and desktop layouts with Vuetify components and intuitive UX.
\end{itemize}

\section{Proposed System Overview}
This section presents the three main components of the proposed system, comparing the workflow before and after implementation.

\subsection{Single Sign-On (SSO) Authentication}

\textbf{Before:} Users needed to create separate credentials, leading to credential fatigue and security risks from weak or reused passwords.

\textbf{After:} The implemented flow works as follows:
\begin{enumerate}
    \item User clicks on Google or Apple SSO button on the sign-in page.
    \item System redirects to the OAuth provider for authentication.
    \item Upon successful authentication, the provider returns user identity.
    \item System creates or links the user account and issues JWT tokens.
    \item User is redirected to the dashboard with active session.
\end{enumerate}

\begin{figure}[H]
    \centering
    \includegraphics[width=0.8\textwidth]{images/Deployment/sign-in-UI.jpg}
    \caption{Sign-In Interface with SSO Options}
    \label{fig:sso-signin}
\end{figure}

\begin{figure}[H]
    \centering
    \includegraphics[width=0.8\textwidth]{images/Deployment/registration-UI.jpg}
    \caption{Registration Interface with SSO Integration}
    \label{fig:sso-registration}
\end{figure}

\subsection{Stripe Payment Integration}

\textbf{Before:} No automated billing, requiring manual invoice generation and payment verification before granting access.

\textbf{After:} The implemented payment flow works as follows:
\begin{enumerate}
    \item Admin configures subscription plans in Stripe product catalog.
    \item User selects a plan and clicks subscribe.
    \item System creates a Stripe checkout session and redirects user.
    \item User completes payment on Stripe's hosted checkout page.
    \item Stripe sends webhook notification upon successful payment.
    \item System updates subscription status and grants access to features.
\end{enumerate}

\begin{figure}[H]
    \centering
    \includegraphics[width=0.8\textwidth]{images/Deployment/Stripe-product-catalog.jpg}
    \caption{Stripe Product Catalog Configuration}
    \label{fig:stripe-catalog}
\end{figure}

\begin{figure}[H]
    \centering
    \includegraphics[width=0.8\textwidth]{images/Deployment/basic-plan-Stripe-check-out-UI-for-users.jpg}
    \caption{Stripe Checkout Interface for Basic Plan}
    \label{fig:stripe-checkout}
\end{figure}

\begin{figure}[H]
    \centering
    \includegraphics[width=0.8\textwidth]{images/Deployment/subscription-UI-for-users.jpg}
    \caption{Subscription Management Interface for Users}
    \label{fig:subscription-ui}
\end{figure}

\begin{figure}[H]
    \centering
    \includegraphics[width=0.8\textwidth]{images/Deployment/succesful-subscription.jpg}
    \caption{Successful Subscription Confirmation}
    \label{fig:successful-subscription}
\end{figure}

\subsection{Frontend Dashboard}

\textbf{Before:} No visual interface, requiring direct API calls and making it difficult to monitor subscriptions or manage users.

\textbf{After:} The implemented dashboard provides a complete user flow:
\begin{enumerate}
    \item User authenticates via SSO or traditional login.
    \item Dashboard displays subscription status and usage quotas.
    \item User can manage profile, view transactions, and upgrade plans.
    \item Admin can manage users, configure plans, and monitor subscriptions.
\end{enumerate}

\begin{figure}[H]
    \centering
    \includegraphics[width=0.8\textwidth]{images/Deployment/users-UI.jpg}
    \caption{User Management Dashboard}
    \label{fig:users-dashboard}
\end{figure}

\begin{figure}[H]
    \centering
    \includegraphics[width=0.8\textwidth]{images/Deployment/subscription-UI-for-admin.jpg}
    \caption{Admin Subscription Management Interface}
    \label{fig:admin-subscription}
\end{figure}

\begin{figure}[H]
    \centering
    \includegraphics[width=0.8\textwidth]{images/Deployment/upgrade-or-change-plan.jpg}
    \caption{Plan Upgrade Interface}
    \label{fig:upgrade-plan}
\end{figure}
